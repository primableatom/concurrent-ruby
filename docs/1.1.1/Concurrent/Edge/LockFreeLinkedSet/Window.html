<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Concurrent::Edge::LockFreeLinkedSet::Window
  
    &mdash; Concurrent Ruby
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Concurrent::Edge::LockFreeLinkedSet::Window";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (W)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Edge.html" title="Concurrent::Edge (module)">Edge</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../LockFreeLinkedSet.html" title="Concurrent::Edge::LockFreeLinkedSet (class)">LockFreeLinkedSet</a></span></span>
     &raquo; 
    <span class="title">Window</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Concurrent::Edge::LockFreeLinkedSet::Window
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Concurrent::Edge::LockFreeLinkedSet::Window</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib-edge/concurrent/edge/lock_free_linked_set/window.rb</dd>
  </dl>
  
</div>

<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#curr-instance_method" title="#curr (instance method)">#<strong>curr</strong>  &#x21d2; undocumented </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pred-instance_method" title="#pred (instance method)">#<strong>pred</strong>  &#x21d2; undocumented </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">.<strong>find</strong>(head, item)  &#x21d2; undocumented </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This method is used to find a &#39;window&#39; for which <code>add</code> and <code>remove</code> methods can use to know where to add and remove from the list.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(pred, curr)  &#x21d2; Window </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Window.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(pred, curr)  &#x21d2; <tt><span class='object_link'><a href="" title="Concurrent::Edge::LockFreeLinkedSet::Window (class)">Window</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Window</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/lock_free_linked_set/window.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_pred'>pred</span><span class='comma'>,</span> <span class='id identifier rubyid_curr'>curr</span><span class='rparen'>)</span>
  <span class='ivar'>@pred</span><span class='comma'>,</span> <span class='ivar'>@curr</span> <span class='op'>=</span> <span class='id identifier rubyid_pred'>pred</span><span class='comma'>,</span> <span class='id identifier rubyid_curr'>curr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="curr=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="curr-instance_method">
  
    #<strong>curr</strong>  &#x21d2; <tt>undocumented</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/lock_free_linked_set/window.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_curr'>curr</span>
  <span class='ivar'>@curr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="pred=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="pred-instance_method">
  
    #<strong>pred</strong>  &#x21d2; <tt>undocumented</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/lock_free_linked_set/window.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pred'>pred</span>
  <span class='ivar'>@pred</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="find-class_method">
  
    .<strong>find</strong>(head, item)  &#x21d2; <tt>undocumented</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>This method is used to find a &#39;window&#39; for which <code>add</code> and <code>remove</code>
methods can use to know where to add and remove from the list. However,
it has another responsibilility, which is to physically unlink any
nodes marked for removal in the set. This prevents adds/removes from
having to retraverse the list to physically unlink nodes.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib-edge/concurrent/edge/lock_free_linked_set/window.rb', line 16</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_head'>head</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_pred'>pred</span> <span class='op'>=</span> <span class='id identifier rubyid_head'>head</span>
    <span class='id identifier rubyid_curr'>curr</span> <span class='op'>=</span> <span class='id identifier rubyid_pred'>pred</span><span class='period'>.</span><span class='id identifier rubyid_next_node'>next_node</span>

    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_marked'>marked</span> <span class='op'>=</span> <span class='id identifier rubyid_curr'>curr</span><span class='period'>.</span><span class='id identifier rubyid_successor_reference'>successor_reference</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>

      <span class='comment'># Remove sequence of marked nodes
</span>      <span class='kw'>while</span> <span class='id identifier rubyid_marked'>marked</span>
        <span class='id identifier rubyid_removed'>removed</span> <span class='op'>=</span> <span class='id identifier rubyid_pred'>pred</span><span class='period'>.</span><span class='id identifier rubyid_successor_reference'>successor_reference</span><span class='period'>.</span><span class='id identifier rubyid_compare_and_set'>compare_and_set</span> <span class='id identifier rubyid_curr'>curr</span><span class='comma'>,</span> <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>false</span>

        <span class='comment'># If could not remove node, try again
</span>        <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='op'>&amp;&amp;</span> <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_removed'>removed</span>

        <span class='id identifier rubyid_curr'>curr</span> <span class='op'>=</span> <span class='id identifier rubyid_succ'>succ</span>
        <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_marked'>marked</span> <span class='op'>=</span> <span class='id identifier rubyid_curr'>curr</span><span class='period'>.</span><span class='id identifier rubyid_successor_reference'>successor_reference</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
      <span class='kw'>end</span>

      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span>

      <span class='comment'># We have found a window
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_pred'>pred</span><span class='comma'>,</span> <span class='id identifier rubyid_curr'>curr</span> <span class='kw'>if</span> <span class='id identifier rubyid_curr'>curr</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_item'>item</span>

      <span class='id identifier rubyid_pred'>pred</span> <span class='op'>=</span> <span class='id identifier rubyid_curr'>curr</span>
      <span class='id identifier rubyid_curr'>curr</span> <span class='op'>=</span> <span class='id identifier rubyid_succ'>succ</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_blank">yard</a>.
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57940973-1', 'auto');
  ga('send', 'pageview');

</script>

    </div>
  </body>
</html>